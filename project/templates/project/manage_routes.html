{% extends 'project/base.html' %}

{% block title %}Manage Routes - Central Rock Gym{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
    <h2>Manage Routes</h2>
    <a href="{% url 'project:admin_dashboard' %}" class="btn-secondary">‚Üê Back to Admin Dashboard</a>
</div>

<div class="card">
    <h3>Update Route Status</h3>
    <p>Mark routes as active or archived</p>
    
    <!-- Filter Options -->
    <div class="filter-options">
        <a href="?filter=all" class="filter-link {% if not request.GET.filter or request.GET.filter == 'all' %}active{% endif %}">All Routes</a>
        <a href="?filter=active" class="filter-link {% if request.GET.filter == 'active' %}active{% endif %}">Active Only</a>
        <a href="?filter=archived" class="filter-link {% if request.GET.filter == 'archived' %}active{% endif %}">Archived Only</a>
    </div>
    
    <div class="route-management-list">
        {% for route in routes %}
            <div class="route-management-item">
                <div class="route-info">
                    <h4>
                        {% if route.name %}
                            {{ route.name }}
                        {% else %}
                            {{ route.color|title }} Route
                        {% endif %}
                        <span class="route-grade">{{ route.grade }}</span>
                    </h4>
                    <p>
                        <span class="route-color route-color-{{ route.color }}"></span>
                        <strong>Area:</strong> {{ route.area.name }} | 
                        <strong>Set by:</strong> {{ route.setter_name }} | 
                        <strong>Date:</strong> {{ route.date_set }}
                    </p>
                </div>
                
                <div class="route-actions">
                    <form method="post" action="{% url 'project:toggle_route_status' route.pk %}" class="status-form">
                        {% csrf_token %}
                        <label class="status-toggle">
                            <input type="checkbox" name="is_active" {% if route.is_active %}checked{% endif %} onchange="this.form.submit()">
                            <span class="status-label">
                                {% if route.is_active %}Active{% else %}Archived{% endif %}
                            </span>
                        </label>
                    </form>
                </div>
            </div>
        {% empty %}
            <p>No routes found matching the current filter.</p>
        {% endfor %}
    </div>
</div>

<!-- TODO: Add bulk operations (select multiple routes) -->
<!-- TODO: Add route editing capability -->
<!-- TODO: Add route deletion with confirmation -->
<!-- TODO: Add reason field for archiving -->
{% endblock %}